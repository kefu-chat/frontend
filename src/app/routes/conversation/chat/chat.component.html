<div
  nz-row
  nzJustify="center"
  nzAlign="top"
  *ngIf="assignedData.length + unassignedData.length > 0"
  style="height: 100%; width: 100%;"
>
  <div
    class="customlist"
    nz-col
    [style]="selectId ? '_width: auto;' : 'width: 100%;'"
  >
    <!--
    <div class="search-wrapper">
      <nz-input-group [nzPrefix]="searchTemplate" class="searchInput">
        <input type="text" nz-input placeholder="在这里搜索" nzSize="large" />
      </nz-input-group>
      <ng-template #searchTemplate
        ><i nz-icon nz-tooltip nzType="search" style="color: #505a69;"></i
      ></ng-template>
    </div>
    -->
    <div>
      <div class="content-title">
        客服工作台
      </div>
      <ul nz-menu nzMode="inline" class="ulout">
        <nz-tabset [nzSelectedIndex]="currentTab" [nzAnimated]="false">
          <nz-tab nzTitle="未接待">
            <ul *ngIf="unassignedData.length > 0">
              <li
                nz-menu-item
                class="conversation-item"
                *ngFor="let item of unassignedData"
                [nzSelected]="selectId == item.id"
                (click)="to(item)"
              >
                <nz-avatar
                  nz-comment-avatar
                  nzIcon="user"
                  [nzSrc]="item.icon"
                  [style]="
                    item.online_status == 0 ? 'filter: grayscale(1)' : ''
                  "
                ></nz-avatar>
                <div class="conversation-list-content">
                  <div class="conversation-visitor-name">
                    {{ item.visitor.name }}
                    {{ item.online_status == 0 ? "(已离线)" : "" }}
                  </div>
                  <div class="last-message" *ngIf="item.last_message">
                    <span>
                      {{
                        item.last_message.sender_type_text == "user"
                          ? item.last_message.sender_id == user.id
                            ? "你"
                            : item.last_message.sender.name + "(客服)"
                          : item.last_message.sender.name
                      }}:
                      <span *ngIf="item.last_message.type == 1">
                        {{ item.last_message.content }}
                      </span>
                      <span *ngIf="item.last_message.type == 2">
                        [图片消息]
                      </span>
                    </span>
                  </div>
                </div>
              </li>
            </ul>
          </nz-tab>
          <nz-tab nzTitle="我接待的">
            <ul>
              <li
                nz-menu-item
                class="conversation-item"
                *ngFor="let item of assignedData"
                [nzSelected]="selectId == item.id"
                (click)="to(item)"
              >
                <nz-avatar
                  nz-comment-avatar
                  nzIcon="user"
                  [nzSrc]="item.icon"
                  [style]="
                    item.online_status == 0 ? 'filter: grayscale(1)' : ''
                  "
                ></nz-avatar>
                <div class="conversation-list-content">
                  <div class="conversation-visitor-name">
                    {{ item.visitor.name }}
                    {{ item.online_status == 0 ? "(已离线)" : "" }}
                  </div>
                  <div class="last-message" *ngIf="item.last_message">
                    <span>
                      {{
                        item.last_message.sender_type_text == "user"
                          ? item.last_message.sender_id == user.id
                            ? "你"
                            : item.last_message.sender.name + "(客服)"
                          : item.last_message.sender.name
                      }}:
                      <span *ngIf="item.last_message.type == 1">
                        {{ item.last_message.content }}
                      </span>
                      <span *ngIf="item.last_message.type == 2">
                        [图片消息]
                      </span>
                    </span>
                  </div>
                </div>
              </li>
            </ul>
          </nz-tab>
        </nz-tabset>
      </ul>
    </div>
  </div>
  <div nz-col class="chat-right" *ngIf="selectId">
    <router-outlet [id]="selectId"></router-outlet>
  </div>
</div>
<div
  *ngIf="assignedData.length + unassignedData.length == 0"
  nz-row
  nzAlign="middle"
  style="width: 100%; height: 100;"
>
  <div style="text-align: center; width: 100%;">
    <img src="./assets/tmp/img/empty.svg" alt="" />
    <h1 style="color: #333; width: 100%;">当前没有接待中的客户</h1>
  </div>
</div>
